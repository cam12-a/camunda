{"ast":null,"code":"import axios from \"axios\";\naxios.defaults.baseURL = \"http://localhost:8085/\";\naxios.defaults;\n\nvar headers = function () {\n  return {\n    \"Authorization\": `${localStorage.getItem(\"access_token\")}`\n  };\n};\n\nheaders();\naxios.interceptors.request.use(config => {\n  if (localStorage.getItem(\"access_token\") === \"redirect\") {\n    window.location = \"/\";\n    localStorage.removeItem(\"access_token\");\n  } else {\n    config.headers['Authorization'] = localStorage.getItem(\"access_token\");\n  }\n\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(response => {\n  //console.log(response)\n  if (response.data.token == \"redirect\") {\n    window.location = \"/\";\n    localStorage.removeItem(\"access_token\");\n  }\n\n  console.log(\"inter res \" + response);\n\n  if (response.status == 200) {\n    localStorage.setItem(\"access_token\", response.data.token);\n  }\n\n  return response;\n}, (error, status, headers, body) => {\n  console.log(\"intercept rejected response \" + JSON.stringify(error, status, headers, body));\n});","map":{"version":3,"names":["axios","defaults","baseURL","headers","localStorage","getItem","interceptors","request","use","config","window","location","removeItem","error","Promise","reject","response","data","token","console","log","status","setItem","body","JSON","stringify"],"sources":["C:/Users/camar/Intellij/Kotlin/MFA/frontend/src/assets/scripts/axios.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n\r\naxios.defaults.baseURL=\"http://localhost:8085/\"\r\naxios.defaults\r\n\r\nvar headers = function() {\r\n    return ({\r\n        \"Authorization\": `${localStorage.getItem(\"access_token\")}`\r\n    });\r\n};\r\n\r\nheaders()\r\n\r\naxios.interceptors.request.use(config =>{\r\n\r\n    if(localStorage.getItem(\"access_token\")===\"redirect\"){\r\n        window.location=\"/\"\r\n        localStorage.removeItem(\"access_token\")\r\n    }\r\n    else {\r\n        config.headers['Authorization']= localStorage.getItem(\"access_token\");\r\n    }\r\n    return config\r\n\r\n}, error=>{\r\n        return Promise.reject(error)\r\n    })\r\n\r\n\r\naxios.interceptors.response.use(response =>{\r\n    //console.log(response)\r\n    if (response.data.token==\"redirect\"){\r\n        window.location=\"/\"\r\n        localStorage.removeItem(\"access_token\")\r\n    }\r\n    console.log(\"inter res \"+response)\r\n\r\n    if(response.status==200){\r\n        localStorage.setItem(\"access_token\",response.data.token);\r\n\r\n    }\r\n\r\n    return response\r\n}, (error, status,headers,body) =>{\r\n    console.log(\"intercept rejected response \"+JSON.stringify(error, status,headers, body))\r\n    }\r\n    )\r\n\r\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGAA,KAAK,CAACC,QAAN,CAAeC,OAAf,GAAuB,wBAAvB;AACAF,KAAK,CAACC,QAAN;;AAEA,IAAIE,OAAO,GAAG,YAAW;EACrB,OAAQ;IACJ,iBAAkB,GAAEC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAqC;EADrD,CAAR;AAGH,CAJD;;AAMAF,OAAO;AAEPH,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+BC,MAAM,IAAG;EAEpC,IAAGL,YAAY,CAACC,OAAb,CAAqB,cAArB,MAAuC,UAA1C,EAAqD;IACjDK,MAAM,CAACC,QAAP,GAAgB,GAAhB;IACAP,YAAY,CAACQ,UAAb,CAAwB,cAAxB;EACH,CAHD,MAIK;IACDH,MAAM,CAACN,OAAP,CAAe,eAAf,IAAiCC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAjC;EACH;;EACD,OAAOI,MAAP;AAEH,CAXD,EAWGI,KAAK,IAAE;EACF,OAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAbL;AAgBAb,KAAK,CAACM,YAAN,CAAmBU,QAAnB,CAA4BR,GAA5B,CAAgCQ,QAAQ,IAAG;EACvC;EACA,IAAIA,QAAQ,CAACC,IAAT,CAAcC,KAAd,IAAqB,UAAzB,EAAoC;IAChCR,MAAM,CAACC,QAAP,GAAgB,GAAhB;IACAP,YAAY,CAACQ,UAAb,CAAwB,cAAxB;EACH;;EACDO,OAAO,CAACC,GAAR,CAAY,eAAaJ,QAAzB;;EAEA,IAAGA,QAAQ,CAACK,MAAT,IAAiB,GAApB,EAAwB;IACpBjB,YAAY,CAACkB,OAAb,CAAqB,cAArB,EAAoCN,QAAQ,CAACC,IAAT,CAAcC,KAAlD;EAEH;;EAED,OAAOF,QAAP;AACH,CAdD,EAcG,CAACH,KAAD,EAAQQ,MAAR,EAAelB,OAAf,EAAuBoB,IAAvB,KAA+B;EAC9BJ,OAAO,CAACC,GAAR,CAAY,iCAA+BI,IAAI,CAACC,SAAL,CAAeZ,KAAf,EAAsBQ,MAAtB,EAA6BlB,OAA7B,EAAsCoB,IAAtC,CAA3C;AACC,CAhBL"},"metadata":{},"sourceType":"module"}